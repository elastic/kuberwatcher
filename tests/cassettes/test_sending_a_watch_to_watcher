interactions:
- request:
    body: null
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json
    method: GET
    uri: http://elasticsearch:9200/.watches/_search?size=1000
  response:
    body:
      string: '{"error":{"root_cause":[{"type":"index_not_found_exception","reason":"no
        such index [.watches]","resource.type":"index_or_alias","resource.id":".watches","index_uuid":"_na_","index":".watches"}],"type":"index_not_found_exception","reason":"no
        such index [.watches]","resource.type":"index_or_alias","resource.id":".watches","index_uuid":"_na_","index":".watches"},"status":404}'
    headers:
      content-length:
      - '377'
      content-type:
      - application/json; charset=UTF-8
    status:
      code: 404
      message: Not Found
- request:
    body: null
    headers:
      Accept:
      - application/json
      Content-Type:
      - application/json
      User-Agent:
      - Swagger-Codegen/8.0.1/python
    method: GET
    uri: https://192.168.64.4:8443/api/v1/namespaces?labelSelector=watcher%3Denabled
  response:
    body:
      string: '{"kind":"NamespaceList","apiVersion":"v1","metadata":{"selfLink":"/api/v1/namespaces","resourceVersion":"1603"},"items":[{"metadata":{"name":"override","selfLink":"/api/v1/namespaces/override","uid":"5caf1e74-fc7e-11e9-aa20-7263c999ee7b","resourceVersion":"812","creationTimestamp":"2019-11-01T08:05:26Z","labels":{"watcher":"enabled"},"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"v1\",\"kind\":\"Namespace\",\"metadata\":{\"annotations\":{\"watcher.alerts.slack\":\"@michael.override\"},\"labels\":{\"watcher\":\"enabled\"},\"name\":\"override\"}}\n","watcher.alerts.slack":"@michael.override"}},"spec":{"finalizers":["kubernetes"]},"status":{"phase":"Active"}},{"metadata":{"name":"test","selfLink":"/api/v1/namespaces/test","uid":"5cb80050-fc7e-11e9-aa20-7263c999ee7b","resourceVersion":"818","creationTimestamp":"2019-11-01T08:05:26Z","labels":{"watcher":"enabled"},"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"v1\",\"kind\":\"Namespace\",\"metadata\":{\"annotations\":{},\"labels\":{\"watcher\":\"enabled\"},\"name\":\"test\"}}\n"}},"spec":{"finalizers":["kubernetes"]},"status":{"phase":"Active"}}]}

'
    headers:
      Content-Length:
      - '1186'
      Content-Type:
      - application/json
      Date:
      - Fri, 01 Nov 2019 08:12:49 GMT
    status:
      code: 200
      message: OK
- request:
    body: null
    headers:
      Accept:
      - application/json
      Content-Type:
      - application/json
      User-Agent:
      - Swagger-Codegen/8.0.1/python
    method: GET
    uri: https://192.168.64.4:8443/api/v1/pods?labelSelector=watcher%21%3Ddisabled&watch=False
  response:
    body:
      string: '{"kind":"PodList","apiVersion":"v1","metadata":{"selfLink":"/api/v1/pods","resourceVersion":"1603"},"items":[{"metadata":{"name":"disabled-56bdf5c8f6-bd6fs","generateName":"disabled-56bdf5c8f6-","namespace":"disabled","selfLink":"/api/v1/namespaces/disabled/pods/disabled-56bdf5c8f6-bd6fs","uid":"5ca5bf26-fc7e-11e9-aa20-7263c999ee7b","resourceVersion":"917","creationTimestamp":"2019-11-01T08:05:26Z","labels":{"pod-template-hash":"56bdf5c8f6","run":"disabled"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"ReplicaSet","name":"disabled-56bdf5c8f6","uid":"5ca36684-fc7e-11e9-aa20-7263c999ee7b","controller":true,"blockOwnerDeletion":true}]},"spec":{"volumes":[{"name":"default-token-lm5w5","secret":{"secretName":"default-token-lm5w5","defaultMode":420}}],"containers":[{"name":"nginx","image":"nginx","resources":{},"volumeMounts":[{"name":"default-token-lm5w5","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"minikube","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:26Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:43Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:43Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:26Z"}],"hostIP":"192.168.64.4","podIP":"172.17.0.4","startTime":"2019-11-01T08:05:26Z","containerStatuses":[{"name":"nginx","state":{"running":{"startedAt":"2019-11-01T08:05:42Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"nginx:latest","imageID":"docker-pullable://nginx@sha256:922c815aa4df050d4df476e92daed4231f466acc8ee90e0e774951b0fd7195a4","containerID":"docker://e1374bf8b526900fe524dad225b5f3fe54825bdd6785b8e41cdc1053eb5f7168"}],"qosClass":"BestEffort"}},{"metadata":{"name":"nginx-85b7896645-vlqzh","generateName":"nginx-85b7896645-","namespace":"disabled","selfLink":"/api/v1/namespaces/disabled/pods/nginx-85b7896645-vlqzh","uid":"5ca55413-fc7e-11e9-aa20-7263c999ee7b","resourceVersion":"923","creationTimestamp":"2019-11-01T08:05:26Z","labels":{"pod-template-hash":"85b7896645","run":"nginx","watcher":"enabled"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"ReplicaSet","name":"nginx-85b7896645","uid":"5c9f2e2d-fc7e-11e9-aa20-7263c999ee7b","controller":true,"blockOwnerDeletion":true}]},"spec":{"volumes":[{"name":"default-token-lm5w5","secret":{"secretName":"default-token-lm5w5","defaultMode":420}}],"containers":[{"name":"nginx","image":"nginx","resources":{},"volumeMounts":[{"name":"default-token-lm5w5","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"minikube","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:26Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:44Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:44Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:26Z"}],"hostIP":"192.168.64.4","podIP":"172.17.0.5","startTime":"2019-11-01T08:05:26Z","containerStatuses":[{"name":"nginx","state":{"running":{"startedAt":"2019-11-01T08:05:43Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"nginx:latest","imageID":"docker-pullable://nginx@sha256:922c815aa4df050d4df476e92daed4231f466acc8ee90e0e774951b0fd7195a4","containerID":"docker://8bd54555e61533178d4a5a5d4e384de270ff1c912be409579f413925b66402f9"}],"qosClass":"BestEffort"}},{"metadata":{"name":"coredns-fb8b8dccf-w52qk","generateName":"coredns-fb8b8dccf-","namespace":"kube-system","selfLink":"/api/v1/namespaces/kube-system/pods/coredns-fb8b8dccf-w52qk","uid":"ac714ab3-fc7d-11e9-aa20-7263c999ee7b","resourceVersion":"462","creationTimestamp":"2019-11-01T08:00:30Z","labels":{"k8s-app":"kube-dns","pod-template-hash":"fb8b8dccf"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"ReplicaSet","name":"coredns-fb8b8dccf","uid":"ac66c86c-fc7d-11e9-aa20-7263c999ee7b","controller":true,"blockOwnerDeletion":true}]},"spec":{"volumes":[{"name":"config-volume","configMap":{"name":"coredns","items":[{"key":"Corefile","path":"Corefile"}],"defaultMode":420}},{"name":"coredns-token-rmspk","secret":{"secretName":"coredns-token-rmspk","defaultMode":420}}],"containers":[{"name":"coredns","image":"k8s.gcr.io/coredns:1.3.1","args":["-conf","/etc/coredns/Corefile"],"ports":[{"name":"dns","containerPort":53,"protocol":"UDP"},{"name":"dns-tcp","containerPort":53,"protocol":"TCP"},{"name":"metrics","containerPort":9153,"protocol":"TCP"}],"resources":{"limits":{"memory":"170Mi"},"requests":{"cpu":"100m","memory":"70Mi"}},"volumeMounts":[{"name":"config-volume","readOnly":true,"mountPath":"/etc/coredns"},{"name":"coredns-token-rmspk","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"httpGet":{"path":"/health","port":8080,"scheme":"HTTP"},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":5},"readinessProbe":{"httpGet":{"path":"/health","port":8080,"scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"add":["NET_BIND_SERVICE"],"drop":["all"]},"readOnlyRootFilesystem":true,"allowPrivilegeEscalation":false,"procMount":"Default"}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"Default","nodeSelector":{"beta.kubernetes.io/os":"linux"},"serviceAccountName":"coredns","serviceAccount":"coredns","nodeName":"minikube","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"key":"node-role.kubernetes.io/master","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priorityClassName":"system-cluster-critical","priority":2000000000,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:30Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:01:09Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:01:09Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:30Z"}],"hostIP":"192.168.64.4","podIP":"172.17.0.3","startTime":"2019-11-01T08:00:30Z","containerStatuses":[{"name":"coredns","state":{"running":{"startedAt":"2019-11-01T08:01:04Z"}},"lastState":{"terminated":{"exitCode":2,"reason":"Error","startedAt":"2019-11-01T08:00:33Z","finishedAt":"2019-11-01T08:01:03Z","containerID":"docker://9536494c5692bffad9f48499faeddd426ef203b960e41a88748ac572fb2271eb"}},"ready":true,"restartCount":1,"image":"k8s.gcr.io/coredns:1.3.1","imageID":"docker-pullable://k8s.gcr.io/coredns@sha256:02382353821b12c21b062c59184e227e001079bb13ebd01f9d3270ba0fcbf1e4","containerID":"docker://b704096d5e7a08bcffc7306b45194526eb61dbb71f32cac56f5a00cdd07bf65f"}],"qosClass":"Burstable"}},{"metadata":{"name":"coredns-fb8b8dccf-zklkd","generateName":"coredns-fb8b8dccf-","namespace":"kube-system","selfLink":"/api/v1/namespaces/kube-system/pods/coredns-fb8b8dccf-zklkd","uid":"ac6d3df8-fc7d-11e9-aa20-7263c999ee7b","resourceVersion":"466","creationTimestamp":"2019-11-01T08:00:30Z","labels":{"k8s-app":"kube-dns","pod-template-hash":"fb8b8dccf"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"ReplicaSet","name":"coredns-fb8b8dccf","uid":"ac66c86c-fc7d-11e9-aa20-7263c999ee7b","controller":true,"blockOwnerDeletion":true}]},"spec":{"volumes":[{"name":"config-volume","configMap":{"name":"coredns","items":[{"key":"Corefile","path":"Corefile"}],"defaultMode":420}},{"name":"coredns-token-rmspk","secret":{"secretName":"coredns-token-rmspk","defaultMode":420}}],"containers":[{"name":"coredns","image":"k8s.gcr.io/coredns:1.3.1","args":["-conf","/etc/coredns/Corefile"],"ports":[{"name":"dns","containerPort":53,"protocol":"UDP"},{"name":"dns-tcp","containerPort":53,"protocol":"TCP"},{"name":"metrics","containerPort":9153,"protocol":"TCP"}],"resources":{"limits":{"memory":"170Mi"},"requests":{"cpu":"100m","memory":"70Mi"}},"volumeMounts":[{"name":"config-volume","readOnly":true,"mountPath":"/etc/coredns"},{"name":"coredns-token-rmspk","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"livenessProbe":{"httpGet":{"path":"/health","port":8080,"scheme":"HTTP"},"initialDelaySeconds":60,"timeoutSeconds":5,"periodSeconds":10,"successThreshold":1,"failureThreshold":5},"readinessProbe":{"httpGet":{"path":"/health","port":8080,"scheme":"HTTP"},"timeoutSeconds":1,"periodSeconds":10,"successThreshold":1,"failureThreshold":3},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"capabilities":{"add":["NET_BIND_SERVICE"],"drop":["all"]},"readOnlyRootFilesystem":true,"allowPrivilegeEscalation":false,"procMount":"Default"}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"Default","nodeSelector":{"beta.kubernetes.io/os":"linux"},"serviceAccountName":"coredns","serviceAccount":"coredns","nodeName":"minikube","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"key":"node-role.kubernetes.io/master","effect":"NoSchedule"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priorityClassName":"system-cluster-critical","priority":2000000000,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:30Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:01:09Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:01:09Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:30Z"}],"hostIP":"192.168.64.4","podIP":"172.17.0.2","startTime":"2019-11-01T08:00:30Z","containerStatuses":[{"name":"coredns","state":{"running":{"startedAt":"2019-11-01T08:01:04Z"}},"lastState":{"terminated":{"exitCode":2,"reason":"Error","startedAt":"2019-11-01T08:00:33Z","finishedAt":"2019-11-01T08:01:03Z","containerID":"docker://0b008546186a81f575b40bfc1f95a174492d75f9134c5c138b489f3b07d94a19"}},"ready":true,"restartCount":1,"image":"k8s.gcr.io/coredns:1.3.1","imageID":"docker-pullable://k8s.gcr.io/coredns@sha256:02382353821b12c21b062c59184e227e001079bb13ebd01f9d3270ba0fcbf1e4","containerID":"docker://a0c3c2e756f69f5793ecb694e999e3a5d8c26e4b8d994b2506ba991d1cf600f1"}],"qosClass":"Burstable"}},{"metadata":{"name":"etcd-minikube","namespace":"kube-system","selfLink":"/api/v1/namespaces/kube-system/pods/etcd-minikube","uid":"cc244392-fc7d-11e9-aa20-7263c999ee7b","resourceVersion":"499","creationTimestamp":"2019-11-01T08:01:23Z","labels":{"component":"etcd","tier":"control-plane"},"annotations":{"kubernetes.io/config.hash":"6f49ca2b753db34980da4c47ead5c62c","kubernetes.io/config.mirror":"6f49ca2b753db34980da4c47ead5c62c","kubernetes.io/config.seen":"2019-11-01T08:00:09.751355123Z","kubernetes.io/config.source":"file"}},"spec":{"volumes":[{"name":"etcd-certs","hostPath":{"path":"/var/lib/minikube/certs/etcd","type":"DirectoryOrCreate"}},{"name":"etcd-data","hostPath":{"path":"/var/lib/minikube/etcd","type":"DirectoryOrCreate"}}],"containers":[{"name":"etcd","image":"k8s.gcr.io/etcd:3.3.10","command":["etcd","--advertise-client-urls=https://192.168.64.4:2379","--cert-file=/var/lib/minikube/certs/etcd/server.crt","--client-cert-auth=true","--data-dir=/var/lib/minikube/etcd","--initial-advertise-peer-urls=https://192.168.64.4:2380","--initial-cluster=minikube=https://192.168.64.4:2380","--key-file=/var/lib/minikube/certs/etcd/server.key","--listen-client-urls=https://127.0.0.1:2379,https://192.168.64.4:2379","--listen-peer-urls=https://192.168.64.4:2380","--name=minikube","--peer-cert-file=/var/lib/minikube/certs/etcd/peer.crt","--peer-client-cert-auth=true","--peer-key-file=/var/lib/minikube/certs/etcd/peer.key","--peer-trusted-ca-file=/var/lib/minikube/certs/etcd/ca.crt","--snapshot-count=10000","--trusted-ca-file=/var/lib/minikube/certs/etcd/ca.crt"],"resources":{},"volumeMounts":[{"name":"etcd-data","mountPath":"/var/lib/minikube/etcd"},{"name":"etcd-certs","mountPath":"/var/lib/minikube/certs/etcd"}],"livenessProbe":{"exec":{"command":["/bin/sh","-ec","ETCDCTL_API=3
        etcdctl --endpoints=https://[127.0.0.1]:2379 --cacert=/var/lib/minikube/certs/etcd/ca.crt
        --cert=/var/lib/minikube/certs/etcd/healthcheck-client.crt --key=/var/lib/minikube/certs/etcd/healthcheck-client.key
        get foo"]},"initialDelaySeconds":15,"timeoutSeconds":15,"periodSeconds":10,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","nodeName":"minikube","hostNetwork":true,"securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoExecute"}],"priorityClassName":"system-cluster-critical","priority":2000000000,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:10Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:13Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:13Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:10Z"}],"hostIP":"192.168.64.4","podIP":"192.168.64.4","startTime":"2019-11-01T08:00:10Z","containerStatuses":[{"name":"etcd","state":{"running":{"startedAt":"2019-11-01T08:00:12Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"k8s.gcr.io/etcd:3.3.10","imageID":"docker-pullable://k8s.gcr.io/etcd@sha256:17da501f5d2a675be46040422a27b7cc21b8a43895ac998b171db1c346f361f7","containerID":"docker://1b1d23d9e536ea1a59329084755d699af2eed40d6e288289354f1ab03894a5a3"}],"qosClass":"BestEffort"}},{"metadata":{"name":"kube-addon-manager-minikube","namespace":"kube-system","selfLink":"/api/v1/namespaces/kube-system/pods/kube-addon-manager-minikube","uid":"a5e352e1-fc7d-11e9-aa20-7263c999ee7b","resourceVersion":"41","creationTimestamp":"2019-11-01T08:00:19Z","labels":{"component":"kube-addon-manager","kubernetes.io/minikube-addons":"addon-manager","version":"v9.0.2"},"annotations":{"kubernetes.io/config.hash":"c2c8ef7fc0b09041ffe1e6a536aa7cfd","kubernetes.io/config.mirror":"c2c8ef7fc0b09041ffe1e6a536aa7cfd","kubernetes.io/config.seen":"2019-11-01T08:00:09.692822587Z","kubernetes.io/config.source":"file"}},"spec":{"volumes":[{"name":"addons","hostPath":{"path":"/etc/kubernetes/","type":""}},{"name":"kubeconfig","hostPath":{"path":"/var/lib/minikube/","type":""}}],"containers":[{"name":"kube-addon-manager","image":"k8s.gcr.io/kube-addon-manager:v9.0.2","env":[{"name":"KUBECONFIG","value":"/var/lib/minikube/kubeconfig"},{"name":"TEST_ADDON_CHECK_INTERVAL_SEC","value":"5"},{"name":"ADDON_MANAGER_LEADER_ELECTION","value":"false"}],"resources":{"requests":{"cpu":"5m","memory":"50Mi"}},"volumeMounts":[{"name":"addons","readOnly":true,"mountPath":"/etc/kubernetes/"},{"name":"kubeconfig","readOnly":true,"mountPath":"/var/lib/minikube/"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","nodeName":"minikube","hostNetwork":true,"securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoExecute"}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:10Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:18Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:18Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:10Z"}],"hostIP":"192.168.64.4","podIP":"192.168.64.4","startTime":"2019-11-01T08:00:10Z","containerStatuses":[{"name":"kube-addon-manager","state":{"running":{"startedAt":"2019-11-01T08:00:17Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"k8s.gcr.io/kube-addon-manager:v9.0.2","imageID":"docker-pullable://k8s.gcr.io/kube-addon-manager@sha256:3e315022a842d782a28e729720f21091dde21f1efea28868d65ec595ad871616","containerID":"docker://fdec062703d1ce0935da2dc6266259e47cd458450f2fac00dd28e5e471970bd1"}],"qosClass":"Burstable"}},{"metadata":{"name":"kube-apiserver-minikube","namespace":"kube-system","selfLink":"/api/v1/namespaces/kube-system/pods/kube-apiserver-minikube","uid":"c890c5de-fc7d-11e9-aa20-7263c999ee7b","resourceVersion":"483","creationTimestamp":"2019-11-01T08:01:17Z","labels":{"component":"kube-apiserver","tier":"control-plane"},"annotations":{"kubernetes.io/config.hash":"7bd4101dd6ef0427f49d4c10f7c7a8eb","kubernetes.io/config.mirror":"7bd4101dd6ef0427f49d4c10f7c7a8eb","kubernetes.io/config.seen":"2019-11-01T08:00:09.738115247Z","kubernetes.io/config.source":"file"}},"spec":{"volumes":[{"name":"ca-certs","hostPath":{"path":"/etc/ssl/certs","type":"DirectoryOrCreate"}},{"name":"k8s-certs","hostPath":{"path":"/var/lib/minikube/certs","type":"DirectoryOrCreate"}},{"name":"usr-share-ca-certificates","hostPath":{"path":"/usr/share/ca-certificates","type":"DirectoryOrCreate"}}],"containers":[{"name":"kube-apiserver","image":"k8s.gcr.io/kube-apiserver:v1.14.0","command":["kube-apiserver","--advertise-address=192.168.64.4","--allow-privileged=true","--authorization-mode=Node,RBAC","--client-ca-file=/var/lib/minikube/certs/ca.crt","--enable-admission-plugins=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,DefaultTolerationSeconds,NodeRestriction,MutatingAdmissionWebhook,ValidatingAdmissionWebhook,ResourceQuota","--enable-bootstrap-token-auth=true","--etcd-cafile=/var/lib/minikube/certs/etcd/ca.crt","--etcd-certfile=/var/lib/minikube/certs/apiserver-etcd-client.crt","--etcd-keyfile=/var/lib/minikube/certs/apiserver-etcd-client.key","--etcd-servers=https://127.0.0.1:2379","--insecure-port=0","--kubelet-client-certificate=/var/lib/minikube/certs/apiserver-kubelet-client.crt","--kubelet-client-key=/var/lib/minikube/certs/apiserver-kubelet-client.key","--kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname","--proxy-client-cert-file=/var/lib/minikube/certs/front-proxy-client.crt","--proxy-client-key-file=/var/lib/minikube/certs/front-proxy-client.key","--requestheader-allowed-names=front-proxy-client","--requestheader-client-ca-file=/var/lib/minikube/certs/front-proxy-ca.crt","--requestheader-extra-headers-prefix=X-Remote-Extra-","--requestheader-group-headers=X-Remote-Group","--requestheader-username-headers=X-Remote-User","--secure-port=8443","--service-account-key-file=/var/lib/minikube/certs/sa.pub","--service-cluster-ip-range=10.96.0.0/12","--tls-cert-file=/var/lib/minikube/certs/apiserver.crt","--tls-private-key-file=/var/lib/minikube/certs/apiserver.key"],"resources":{"requests":{"cpu":"250m"}},"volumeMounts":[{"name":"ca-certs","readOnly":true,"mountPath":"/etc/ssl/certs"},{"name":"k8s-certs","readOnly":true,"mountPath":"/var/lib/minikube/certs"},{"name":"usr-share-ca-certificates","readOnly":true,"mountPath":"/usr/share/ca-certificates"}],"livenessProbe":{"httpGet":{"path":"/healthz","port":8443,"host":"192.168.64.4","scheme":"HTTPS"},"initialDelaySeconds":15,"timeoutSeconds":15,"periodSeconds":10,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","nodeName":"minikube","hostNetwork":true,"securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoExecute"}],"priorityClassName":"system-cluster-critical","priority":2000000000,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:10Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:14Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:14Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:10Z"}],"hostIP":"192.168.64.4","podIP":"192.168.64.4","startTime":"2019-11-01T08:00:10Z","containerStatuses":[{"name":"kube-apiserver","state":{"running":{"startedAt":"2019-11-01T08:00:13Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"k8s.gcr.io/kube-apiserver:v1.14.0","imageID":"docker-pullable://k8s.gcr.io/kube-apiserver@sha256:5a5183b427e2e4226a3a7411064ee1b9dae5199513f2d7569b5e264a7be0fd06","containerID":"docker://563152155dd80e0258532791a9a6bbc9c386859cf1e8c6da46bfc24fa1ee7152"}],"qosClass":"Burstable"}},{"metadata":{"name":"kube-controller-manager-minikube","namespace":"kube-system","selfLink":"/api/v1/namespaces/kube-system/pods/kube-controller-manager-minikube","uid":"cb8a82e3-fc7d-11e9-aa20-7263c999ee7b","resourceVersion":"498","creationTimestamp":"2019-11-01T08:01:22Z","labels":{"component":"kube-controller-manager","tier":"control-plane"},"annotations":{"kubernetes.io/config.hash":"194e9bd854cbd66203d2133f34deae22","kubernetes.io/config.mirror":"194e9bd854cbd66203d2133f34deae22","kubernetes.io/config.seen":"2019-11-01T08:00:09.745158956Z","kubernetes.io/config.source":"file"}},"spec":{"volumes":[{"name":"ca-certs","hostPath":{"path":"/etc/ssl/certs","type":"DirectoryOrCreate"}},{"name":"k8s-certs","hostPath":{"path":"/var/lib/minikube/certs","type":"DirectoryOrCreate"}},{"name":"kubeconfig","hostPath":{"path":"/etc/kubernetes/controller-manager.conf","type":"FileOrCreate"}},{"name":"usr-share-ca-certificates","hostPath":{"path":"/usr/share/ca-certificates","type":"DirectoryOrCreate"}}],"containers":[{"name":"kube-controller-manager","image":"k8s.gcr.io/kube-controller-manager:v1.14.0","command":["kube-controller-manager","--authentication-kubeconfig=/etc/kubernetes/controller-manager.conf","--authorization-kubeconfig=/etc/kubernetes/controller-manager.conf","--bind-address=127.0.0.1","--client-ca-file=/var/lib/minikube/certs/ca.crt","--cluster-signing-cert-file=/var/lib/minikube/certs/ca.crt","--cluster-signing-key-file=/var/lib/minikube/certs/ca.key","--controllers=*,bootstrapsigner,tokencleaner","--kubeconfig=/etc/kubernetes/controller-manager.conf","--leader-elect=true","--requestheader-client-ca-file=/var/lib/minikube/certs/front-proxy-ca.crt","--root-ca-file=/var/lib/minikube/certs/ca.crt","--service-account-private-key-file=/var/lib/minikube/certs/sa.key","--use-service-account-credentials=true"],"resources":{"requests":{"cpu":"200m"}},"volumeMounts":[{"name":"ca-certs","readOnly":true,"mountPath":"/etc/ssl/certs"},{"name":"k8s-certs","readOnly":true,"mountPath":"/var/lib/minikube/certs"},{"name":"kubeconfig","readOnly":true,"mountPath":"/etc/kubernetes/controller-manager.conf"},{"name":"usr-share-ca-certificates","readOnly":true,"mountPath":"/usr/share/ca-certificates"}],"livenessProbe":{"httpGet":{"path":"/healthz","port":10252,"host":"127.0.0.1","scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":15,"periodSeconds":10,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","nodeName":"minikube","hostNetwork":true,"securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoExecute"}],"priorityClassName":"system-cluster-critical","priority":2000000000,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:10Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:14Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:14Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:10Z"}],"hostIP":"192.168.64.4","podIP":"192.168.64.4","startTime":"2019-11-01T08:00:10Z","containerStatuses":[{"name":"kube-controller-manager","state":{"running":{"startedAt":"2019-11-01T08:00:13Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"k8s.gcr.io/kube-controller-manager:v1.14.0","imageID":"docker-pullable://k8s.gcr.io/kube-controller-manager@sha256:433e56decf088553bdbe055610712dc1192453b2265376eea9af4aab9f574b54","containerID":"docker://be06da2f41359e6aea8aacd3592561d31fca3e85ea62db35b41e62012679a0d0"}],"qosClass":"Burstable"}},{"metadata":{"name":"kube-proxy-mb6p4","generateName":"kube-proxy-","namespace":"kube-system","selfLink":"/api/v1/namespaces/kube-system/pods/kube-proxy-mb6p4","uid":"ac4c6550-fc7d-11e9-aa20-7263c999ee7b","resourceVersion":"376","creationTimestamp":"2019-11-01T08:00:30Z","labels":{"controller-revision-hash":"b7775b676","k8s-app":"kube-proxy","pod-template-generation":"1"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"kube-proxy","uid":"a8b1ca67-fc7d-11e9-aa20-7263c999ee7b","controller":true,"blockOwnerDeletion":true}]},"spec":{"volumes":[{"name":"kube-proxy","configMap":{"name":"kube-proxy","defaultMode":420}},{"name":"xtables-lock","hostPath":{"path":"/run/xtables.lock","type":"FileOrCreate"}},{"name":"lib-modules","hostPath":{"path":"/lib/modules","type":""}},{"name":"kube-proxy-token-4wqc6","secret":{"secretName":"kube-proxy-token-4wqc6","defaultMode":420}}],"containers":[{"name":"kube-proxy","image":"k8s.gcr.io/kube-proxy:v1.14.0","command":["/usr/local/bin/kube-proxy","--config=/var/lib/kube-proxy/config.conf","--hostname-override=$(NODE_NAME)"],"env":[{"name":"NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"resources":{},"volumeMounts":[{"name":"kube-proxy","mountPath":"/var/lib/kube-proxy"},{"name":"xtables-lock","mountPath":"/run/xtables.lock"},{"name":"lib-modules","readOnly":true,"mountPath":"/lib/modules"},{"name":"kube-proxy-token-4wqc6","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"privileged":true,"procMount":"Default"}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"kube-proxy","serviceAccount":"kube-proxy","nodeName":"minikube","hostNetwork":true,"securityContext":{},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchFields":[{"key":"metadata.name","operator":"In","values":["minikube"]}]}]}}},"schedulerName":"default-scheduler","tolerations":[{"key":"CriticalAddonsOnly","operator":"Exists"},{"operator":"Exists"},{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute"},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute"},{"key":"node.kubernetes.io/disk-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/memory-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/pid-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/unschedulable","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/network-unavailable","operator":"Exists","effect":"NoSchedule"}],"priorityClassName":"system-node-critical","priority":2000001000,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:30Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:31Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:31Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:30Z"}],"hostIP":"192.168.64.4","podIP":"192.168.64.4","startTime":"2019-11-01T08:00:30Z","containerStatuses":[{"name":"kube-proxy","state":{"running":{"startedAt":"2019-11-01T08:00:31Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"k8s.gcr.io/kube-proxy:v1.14.0","imageID":"docker-pullable://k8s.gcr.io/kube-proxy@sha256:bd414b838473ee9b704ac2c5756cc3d1e536df7daaac26058909a4bdd42a1e89","containerID":"docker://5212f8234e979c8a208a27a5321aa65ab18a2281a19e3366d80fcd357bbf37b2"}],"qosClass":"BestEffort"}},{"metadata":{"name":"kube-scheduler-minikube","namespace":"kube-system","selfLink":"/api/v1/namespaces/kube-system/pods/kube-scheduler-minikube","uid":"d9444e5f-fc7d-11e9-aa20-7263c999ee7b","resourceVersion":"526","creationTimestamp":"2019-11-01T08:01:45Z","labels":{"component":"kube-scheduler","tier":"control-plane"},"annotations":{"kubernetes.io/config.hash":"58272442e226c838b193bbba4c44091e","kubernetes.io/config.mirror":"58272442e226c838b193bbba4c44091e","kubernetes.io/config.seen":"2019-11-01T08:00:09.748078603Z","kubernetes.io/config.source":"file"}},"spec":{"volumes":[{"name":"kubeconfig","hostPath":{"path":"/etc/kubernetes/scheduler.conf","type":"FileOrCreate"}}],"containers":[{"name":"kube-scheduler","image":"k8s.gcr.io/kube-scheduler:v1.14.0","command":["kube-scheduler","--bind-address=127.0.0.1","--kubeconfig=/etc/kubernetes/scheduler.conf","--leader-elect=true"],"resources":{"requests":{"cpu":"100m"}},"volumeMounts":[{"name":"kubeconfig","readOnly":true,"mountPath":"/etc/kubernetes/scheduler.conf"}],"livenessProbe":{"httpGet":{"path":"/healthz","port":10251,"host":"127.0.0.1","scheme":"HTTP"},"initialDelaySeconds":15,"timeoutSeconds":15,"periodSeconds":10,"successThreshold":1,"failureThreshold":8},"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","nodeName":"minikube","hostNetwork":true,"securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"operator":"Exists","effect":"NoExecute"}],"priorityClassName":"system-cluster-critical","priority":2000000000,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:10Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:14Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:14Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:10Z"}],"hostIP":"192.168.64.4","podIP":"192.168.64.4","startTime":"2019-11-01T08:00:10Z","containerStatuses":[{"name":"kube-scheduler","state":{"running":{"startedAt":"2019-11-01T08:00:12Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"k8s.gcr.io/kube-scheduler:v1.14.0","imageID":"docker-pullable://k8s.gcr.io/kube-scheduler@sha256:cb35b2580cd0d97984106a81dcd0f1d9f63d774e18eeae40caef88d217f36b82","containerID":"docker://4ef1e81557756ae6632a76940f2d853a32de9abfb8c675666db47d567d90bcf5"}],"qosClass":"Burstable"}},{"metadata":{"name":"metricbeat-558b6cb866-dttz4","generateName":"metricbeat-558b6cb866-","namespace":"kube-system","selfLink":"/api/v1/namespaces/kube-system/pods/metricbeat-558b6cb866-dttz4","uid":"5ed4f5b5-fc7e-11e9-aa20-7263c999ee7b","resourceVersion":"990","creationTimestamp":"2019-11-01T08:05:29Z","labels":{"k8s-app":"metricbeat","pod-template-hash":"558b6cb866"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"ReplicaSet","name":"metricbeat-558b6cb866","uid":"5e249a70-fc7e-11e9-aa20-7263c999ee7b","controller":true,"blockOwnerDeletion":true}]},"spec":{"volumes":[{"name":"config","configMap":{"name":"metricbeat-deployment-config","defaultMode":384}},{"name":"modules","configMap":{"name":"metricbeat-deployment-modules","defaultMode":384}},{"name":"metricbeat-token-mjkkg","secret":{"secretName":"metricbeat-token-mjkkg","defaultMode":420}}],"containers":[{"name":"metricbeat","image":"docker.elastic.co/beats/metricbeat:7.1.0","args":["-c","/etc/metricbeat.yml","-e"],"env":[{"name":"ELASTICSEARCH_HOST","value":"elasticsearch"},{"name":"ELASTICSEARCH_PORT","value":"9200"},{"name":"ELASTICSEARCH_USERNAME","value":"elastic"},{"name":"ELASTICSEARCH_PASSWORD","value":"changeme"},{"name":"ELASTIC_CLOUD_ID"},{"name":"ELASTIC_CLOUD_AUTH"},{"name":"NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"resources":{"limits":{"memory":"200Mi"},"requests":{"cpu":"100m","memory":"100Mi"}},"volumeMounts":[{"name":"config","readOnly":true,"mountPath":"/etc/metricbeat.yml","subPath":"metricbeat.yml"},{"name":"modules","readOnly":true,"mountPath":"/usr/share/metricbeat/modules.d"},{"name":"metricbeat-token-mjkkg","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"runAsUser":0,"procMount":"Default"}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirstWithHostNet","serviceAccountName":"metricbeat","serviceAccount":"metricbeat","nodeName":"minikube","hostNetwork":true,"securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:29Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:06:14Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:06:14Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:29Z"}],"hostIP":"192.168.64.4","podIP":"192.168.64.4","startTime":"2019-11-01T08:05:29Z","containerStatuses":[{"name":"metricbeat","state":{"running":{"startedAt":"2019-11-01T08:06:13Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.elastic.co/beats/metricbeat:7.1.0","imageID":"docker-pullable://docker.elastic.co/beats/metricbeat@sha256:2585c2461560104bbf72ca6be6534b5711e7f87a7f2b230fb103870ec46c03ed","containerID":"docker://c193365b4d4b8984c9b29b7b3ce17204242ddb30345cd54dec37934acb4e8269"}],"qosClass":"Burstable"}},{"metadata":{"name":"metricbeat-gdbn5","generateName":"metricbeat-","namespace":"kube-system","selfLink":"/api/v1/namespaces/kube-system/pods/metricbeat-gdbn5","uid":"5e4640ca-fc7e-11e9-aa20-7263c999ee7b","resourceVersion":"985","creationTimestamp":"2019-11-01T08:05:28Z","labels":{"controller-revision-hash":"5db8bb84b6","k8s-app":"metricbeat","pod-template-generation":"1"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"DaemonSet","name":"metricbeat","uid":"5e06cef3-fc7e-11e9-aa20-7263c999ee7b","controller":true,"blockOwnerDeletion":true}]},"spec":{"volumes":[{"name":"proc","hostPath":{"path":"/proc","type":""}},{"name":"cgroup","hostPath":{"path":"/sys/fs/cgroup","type":""}},{"name":"dockersock","hostPath":{"path":"/var/run/docker.sock","type":""}},{"name":"config","configMap":{"name":"metricbeat-daemonset-config","defaultMode":384}},{"name":"modules","configMap":{"name":"metricbeat-daemonset-modules","defaultMode":384}},{"name":"data","hostPath":{"path":"/var/lib/metricbeat-data","type":"DirectoryOrCreate"}},{"name":"metricbeat-token-mjkkg","secret":{"secretName":"metricbeat-token-mjkkg","defaultMode":420}}],"containers":[{"name":"metricbeat","image":"docker.elastic.co/beats/metricbeat:7.1.0","args":["-c","/etc/metricbeat.yml","-e","-system.hostfs=/hostfs"],"env":[{"name":"ELASTICSEARCH_HOST","value":"elasticsearch"},{"name":"ELASTICSEARCH_PORT","value":"9200"},{"name":"ELASTICSEARCH_USERNAME","value":"elastic"},{"name":"ELASTICSEARCH_PASSWORD","value":"changeme"},{"name":"ELASTIC_CLOUD_ID"},{"name":"ELASTIC_CLOUD_AUTH"},{"name":"NODE_NAME","valueFrom":{"fieldRef":{"apiVersion":"v1","fieldPath":"spec.nodeName"}}}],"resources":{"limits":{"memory":"200Mi"},"requests":{"cpu":"100m","memory":"100Mi"}},"volumeMounts":[{"name":"config","readOnly":true,"mountPath":"/etc/metricbeat.yml","subPath":"metricbeat.yml"},{"name":"modules","readOnly":true,"mountPath":"/usr/share/metricbeat/modules.d"},{"name":"dockersock","mountPath":"/var/run/docker.sock"},{"name":"proc","readOnly":true,"mountPath":"/hostfs/proc"},{"name":"cgroup","readOnly":true,"mountPath":"/hostfs/sys/fs/cgroup"},{"name":"metricbeat-token-mjkkg","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent","securityContext":{"runAsUser":0,"procMount":"Default"}}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirstWithHostNet","serviceAccountName":"metricbeat","serviceAccount":"metricbeat","nodeName":"minikube","hostNetwork":true,"securityContext":{},"affinity":{"nodeAffinity":{"requiredDuringSchedulingIgnoredDuringExecution":{"nodeSelectorTerms":[{"matchFields":[{"key":"metadata.name","operator":"In","values":["minikube"]}]}]}}},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute"},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute"},{"key":"node.kubernetes.io/disk-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/memory-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/pid-pressure","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/unschedulable","operator":"Exists","effect":"NoSchedule"},{"key":"node.kubernetes.io/network-unavailable","operator":"Exists","effect":"NoSchedule"}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:29Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:06:12Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:06:12Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:28Z"}],"hostIP":"192.168.64.4","podIP":"192.168.64.4","startTime":"2019-11-01T08:05:29Z","containerStatuses":[{"name":"metricbeat","state":{"running":{"startedAt":"2019-11-01T08:06:11Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"docker.elastic.co/beats/metricbeat:7.1.0","imageID":"docker-pullable://docker.elastic.co/beats/metricbeat@sha256:2585c2461560104bbf72ca6be6534b5711e7f87a7f2b230fb103870ec46c03ed","containerID":"docker://8e4e20c805148eedcddc2099e462f7b9b8a17035ce63f5f9c09543661b9b3a6e"}],"qosClass":"Burstable"}},{"metadata":{"name":"storage-provisioner","namespace":"kube-system","selfLink":"/api/v1/namespaces/kube-system/pods/storage-provisioner","uid":"ad585fa5-fc7d-11e9-aa20-7263c999ee7b","resourceVersion":"401","creationTimestamp":"2019-11-01T08:00:32Z","labels":{"addonmanager.kubernetes.io/mode":"Reconcile","integration-test":"storage-provisioner"},"annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{},\"labels\":{\"addonmanager.kubernetes.io/mode\":\"Reconcile\",\"integration-test\":\"storage-provisioner\"},\"name\":\"storage-provisioner\",\"namespace\":\"kube-system\"},\"spec\":{\"containers\":[{\"command\":[\"/storage-provisioner\"],\"image\":\"gcr.io/k8s-minikube/storage-provisioner:v1.8.1\",\"imagePullPolicy\":\"IfNotPresent\",\"name\":\"storage-provisioner\",\"volumeMounts\":[{\"mountPath\":\"/tmp\",\"name\":\"tmp\"}]}],\"hostNetwork\":true,\"serviceAccountName\":\"storage-provisioner\",\"volumes\":[{\"hostPath\":{\"path\":\"/tmp\",\"type\":\"Directory\"},\"name\":\"tmp\"}]}}\n"}},"spec":{"volumes":[{"name":"tmp","hostPath":{"path":"/tmp","type":"Directory"}},{"name":"storage-provisioner-token-c59cw","secret":{"secretName":"storage-provisioner-token-c59cw","defaultMode":420}}],"containers":[{"name":"storage-provisioner","image":"gcr.io/k8s-minikube/storage-provisioner:v1.8.1","command":["/storage-provisioner"],"resources":{},"volumeMounts":[{"name":"tmp","mountPath":"/tmp"},{"name":"storage-provisioner-token-c59cw","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"IfNotPresent"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"storage-provisioner","serviceAccount":"storage-provisioner","nodeName":"minikube","hostNetwork":true,"securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:32Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:34Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:34Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:00:32Z"}],"hostIP":"192.168.64.4","podIP":"192.168.64.4","startTime":"2019-11-01T08:00:32Z","containerStatuses":[{"name":"storage-provisioner","state":{"running":{"startedAt":"2019-11-01T08:00:34Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"gcr.io/k8s-minikube/storage-provisioner:v1.8.1","imageID":"docker://sha256:4689081edb103a9e8174bf23a255bfbe0b2d9ed82edc907abab6989d1c60f02c","containerID":"docker://72073cd3bb5a2b39778f09041ba8c2cb4a09d493eb9f8e961e0173924e3f5283"}],"qosClass":"BestEffort"}},{"metadata":{"name":"hello-1572595800-jkfhg","generateName":"hello-1572595800-","namespace":"test","selfLink":"/api/v1/namespaces/test/pods/hello-1572595800-jkfhg","uid":"000f19a1-fc7f-11e9-aa20-7263c999ee7b","resourceVersion":"1351","creationTimestamp":"2019-11-01T08:10:00Z","labels":{"controller-uid":"000dc53a-fc7f-11e9-aa20-7263c999ee7b","job-name":"hello-1572595800"},"ownerReferences":[{"apiVersion":"batch/v1","kind":"Job","name":"hello-1572595800","uid":"000dc53a-fc7f-11e9-aa20-7263c999ee7b","controller":true,"blockOwnerDeletion":true}]},"spec":{"volumes":[{"name":"default-token-nm4zn","secret":{"secretName":"default-token-nm4zn","defaultMode":420}}],"containers":[{"name":"hello","image":"hello-world","resources":{},"volumeMounts":[{"name":"default-token-nm4zn","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"OnFailure","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"minikube","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Succeeded","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:10:00Z","reason":"PodCompleted"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:10:00Z","reason":"PodCompleted"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:10:00Z","reason":"PodCompleted"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:10:00Z"}],"hostIP":"192.168.64.4","podIP":"172.17.0.8","startTime":"2019-11-01T08:10:00Z","containerStatuses":[{"name":"hello","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2019-11-01T08:10:02Z","finishedAt":"2019-11-01T08:10:02Z","containerID":"docker://cef1c5401282429f5bdc53f9521cff2108c74311905544daf37c7d6da4fb0105"}},"lastState":{},"ready":false,"restartCount":0,"image":"hello-world:latest","imageID":"docker-pullable://hello-world@sha256:c3b4ada4687bbaa170745b3e4dd8ac3f194ca95b2d0518b417fb47e5879d9b5f","containerID":"docker://cef1c5401282429f5bdc53f9521cff2108c74311905544daf37c7d6da4fb0105"}],"qosClass":"BestEffort"}},{"metadata":{"name":"hello-1572595860-7rq5k","generateName":"hello-1572595860-","namespace":"test","selfLink":"/api/v1/namespaces/test/pods/hello-1572595860-7rq5k","uid":"23e68347-fc7f-11e9-aa20-7263c999ee7b","resourceVersion":"1446","creationTimestamp":"2019-11-01T08:11:00Z","labels":{"controller-uid":"23e4b947-fc7f-11e9-aa20-7263c999ee7b","job-name":"hello-1572595860"},"ownerReferences":[{"apiVersion":"batch/v1","kind":"Job","name":"hello-1572595860","uid":"23e4b947-fc7f-11e9-aa20-7263c999ee7b","controller":true,"blockOwnerDeletion":true}]},"spec":{"volumes":[{"name":"default-token-nm4zn","secret":{"secretName":"default-token-nm4zn","defaultMode":420}}],"containers":[{"name":"hello","image":"hello-world","resources":{},"volumeMounts":[{"name":"default-token-nm4zn","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"OnFailure","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"minikube","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Succeeded","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:11:00Z","reason":"PodCompleted"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:11:00Z","reason":"PodCompleted"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:11:00Z","reason":"PodCompleted"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:11:00Z"}],"hostIP":"192.168.64.4","podIP":"172.17.0.8","startTime":"2019-11-01T08:11:00Z","containerStatuses":[{"name":"hello","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2019-11-01T08:11:03Z","finishedAt":"2019-11-01T08:11:03Z","containerID":"docker://d7d21000a9029010cddeb097d20f463abe84140553c001ab531f0b91bb1f76ee"}},"lastState":{},"ready":false,"restartCount":0,"image":"hello-world:latest","imageID":"docker-pullable://hello-world@sha256:c3b4ada4687bbaa170745b3e4dd8ac3f194ca95b2d0518b417fb47e5879d9b5f","containerID":"docker://d7d21000a9029010cddeb097d20f463abe84140553c001ab531f0b91bb1f76ee"}],"qosClass":"BestEffort"}},{"metadata":{"name":"hello-1572595920-jlpq2","generateName":"hello-1572595920-","namespace":"test","selfLink":"/api/v1/namespaces/test/pods/hello-1572595920-jlpq2","uid":"47c0c91b-fc7f-11e9-aa20-7263c999ee7b","resourceVersion":"1540","creationTimestamp":"2019-11-01T08:12:00Z","labels":{"controller-uid":"47bdb4a5-fc7f-11e9-aa20-7263c999ee7b","job-name":"hello-1572595920"},"ownerReferences":[{"apiVersion":"batch/v1","kind":"Job","name":"hello-1572595920","uid":"47bdb4a5-fc7f-11e9-aa20-7263c999ee7b","controller":true,"blockOwnerDeletion":true}]},"spec":{"volumes":[{"name":"default-token-nm4zn","secret":{"secretName":"default-token-nm4zn","defaultMode":420}}],"containers":[{"name":"hello","image":"hello-world","resources":{},"volumeMounts":[{"name":"default-token-nm4zn","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"OnFailure","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"minikube","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Succeeded","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:12:00Z","reason":"PodCompleted"},{"type":"Ready","status":"False","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:12:00Z","reason":"PodCompleted"},{"type":"ContainersReady","status":"False","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:12:00Z","reason":"PodCompleted"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:12:00Z"}],"hostIP":"192.168.64.4","podIP":"172.17.0.8","startTime":"2019-11-01T08:12:00Z","containerStatuses":[{"name":"hello","state":{"terminated":{"exitCode":0,"reason":"Completed","startedAt":"2019-11-01T08:12:03Z","finishedAt":"2019-11-01T08:12:03Z","containerID":"docker://d2753faf0443d31bb46bbc43bd4a721b00bd244725125ac0dc313dd2266fe27a"}},"lastState":{},"ready":false,"restartCount":0,"image":"hello-world:latest","imageID":"docker-pullable://hello-world@sha256:c3b4ada4687bbaa170745b3e4dd8ac3f194ca95b2d0518b417fb47e5879d9b5f","containerID":"docker://d2753faf0443d31bb46bbc43bd4a721b00bd244725125ac0dc313dd2266fe27a"}],"qosClass":"BestEffort"}},{"metadata":{"name":"nginx-7db9fccd9b-h6snw","generateName":"nginx-7db9fccd9b-","namespace":"test","selfLink":"/api/v1/namespaces/test/pods/nginx-7db9fccd9b-h6snw","uid":"5d5f6f42-fc7e-11e9-aa20-7263c999ee7b","resourceVersion":"936","creationTimestamp":"2019-11-01T08:05:27Z","labels":{"pod-template-hash":"7db9fccd9b","run":"nginx"},"ownerReferences":[{"apiVersion":"apps/v1","kind":"ReplicaSet","name":"nginx-7db9fccd9b","uid":"5cc4a602-fc7e-11e9-aa20-7263c999ee7b","controller":true,"blockOwnerDeletion":true}]},"spec":{"volumes":[{"name":"default-token-nm4zn","secret":{"secretName":"default-token-nm4zn","defaultMode":420}}],"containers":[{"name":"nginx","image":"nginx","resources":{},"volumeMounts":[{"name":"default-token-nm4zn","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"minikube","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:27Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:47Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:47Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:27Z"}],"hostIP":"192.168.64.4","podIP":"172.17.0.6","startTime":"2019-11-01T08:05:27Z","containerStatuses":[{"name":"nginx","state":{"running":{"startedAt":"2019-11-01T08:05:46Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"nginx:latest","imageID":"docker-pullable://nginx@sha256:922c815aa4df050d4df476e92daed4231f466acc8ee90e0e774951b0fd7195a4","containerID":"docker://92c7edd2801aaf4a39d3d5a117c3a7c7fe7edabc0addd13a7d6370a8441a16cd"}],"qosClass":"BestEffort"}},{"metadata":{"name":"nginx-pod","namespace":"test","selfLink":"/api/v1/namespaces/test/pods/nginx-pod","uid":"5d6abac3-fc7e-11e9-aa20-7263c999ee7b","resourceVersion":"929","creationTimestamp":"2019-11-01T08:05:27Z","annotations":{"kubectl.kubernetes.io/last-applied-configuration":"{\"apiVersion\":\"v1\",\"kind\":\"Pod\",\"metadata\":{\"annotations\":{},\"name\":\"nginx-pod\",\"namespace\":\"test\"},\"spec\":{\"containers\":[{\"image\":\"nginx\",\"name\":\"nginx\"}]}}\n"}},"spec":{"volumes":[{"name":"default-token-nm4zn","secret":{"secretName":"default-token-nm4zn","defaultMode":420}}],"containers":[{"name":"nginx","image":"nginx","resources":{},"volumeMounts":[{"name":"default-token-nm4zn","readOnly":true,"mountPath":"/var/run/secrets/kubernetes.io/serviceaccount"}],"terminationMessagePath":"/dev/termination-log","terminationMessagePolicy":"File","imagePullPolicy":"Always"}],"restartPolicy":"Always","terminationGracePeriodSeconds":30,"dnsPolicy":"ClusterFirst","serviceAccountName":"default","serviceAccount":"default","nodeName":"minikube","securityContext":{},"schedulerName":"default-scheduler","tolerations":[{"key":"node.kubernetes.io/not-ready","operator":"Exists","effect":"NoExecute","tolerationSeconds":300},{"key":"node.kubernetes.io/unreachable","operator":"Exists","effect":"NoExecute","tolerationSeconds":300}],"priority":0,"enableServiceLinks":true},"status":{"phase":"Running","conditions":[{"type":"Initialized","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:27Z"},{"type":"Ready","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:45Z"},{"type":"ContainersReady","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:45Z"},{"type":"PodScheduled","status":"True","lastProbeTime":null,"lastTransitionTime":"2019-11-01T08:05:27Z"}],"hostIP":"192.168.64.4","podIP":"172.17.0.7","startTime":"2019-11-01T08:05:27Z","containerStatuses":[{"name":"nginx","state":{"running":{"startedAt":"2019-11-01T08:05:44Z"}},"lastState":{},"ready":true,"restartCount":0,"image":"nginx:latest","imageID":"docker-pullable://nginx@sha256:922c815aa4df050d4df476e92daed4231f466acc8ee90e0e774951b0fd7195a4","containerID":"docker://64a98500e422a176e3d80d16a150e0b847f79e34824cb64945be8e50e3a19f7c"}],"qosClass":"BestEffort"}}]}

'
    headers:
      Content-Type:
      - application/json
      Date:
      - Fri, 01 Nov 2019 08:12:49 GMT
    status:
      code: 200
      message: OK
- request:
    body: '{"metadata":{"name":"disabled.nginx","namespace":"disabled","regex":"nginx-%5B%5E-%5D%2B-%5B%5E-%5D%2B","kibana_url":"https://kibana.example.com","kibana_dashboard":"","docs":"","xpack":{"type":"json"},"window":"300s"},"trigger":{"schedule":{"interval":"30s"}},"input":{"search":{"request":{"search_type":"query_then_fetch","indices":["metricbeat-*"],"rest_total_hits_as_int":true,"body":{"aggs":{"result":{"top_hits":{"size":1}},"pods":{"cardinality":{"field":"kubernetes.pod.name"}},"not_ready":{"terms":{"field":"kubernetes.pod.name","min_doc_count":12,"size":100}}},"query":{"bool":{"must_not":[{"match":{"kubernetes.pod.status.ready":"true"}}],"must":[{"regexp":{"kubernetes.pod.name":"nginx-[^-]+-[^-]+"}},{"match":{"kubernetes.namespace":"disabled"}},{"match":{"metricset.name":"state_pod"}},{"match":{"kubernetes.pod.status.phase":"running"}}],"filter":[{"range":{"@timestamp":{"gte":"now-{{ctx.metadata.window}}"}}}]}}}}}},"condition":{"compare":{"ctx.payload.aggregations.not_ready.buckets":{"not_eq":[]}}},"actions":{}}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json
    method: PUT
    uri: http://elasticsearch:9200/_xpack/watcher/watch/disabled.nginx
  response:
    body:
      string: '{"_id":"disabled.nginx","_version":1,"_seq_no":0,"_primary_term":1,"created":true}'
    headers:
      Warning:
      - 299 Elasticsearch-7.1.1-7a013de "[PUT /_xpack/watcher/watch/{id}] is deprecated!
        Use [PUT /_watcher/watch/{id}] instead."
      content-length:
      - '82'
      content-type:
      - application/json; charset=UTF-8
    status:
      code: 201
      message: Created
- request:
    body: '{"metadata":{"name":"test.nginx","namespace":"test","regex":"nginx-%5B%5E-%5D%2B-%5B%5E-%5D%2B","kibana_url":"https://kibana.example.com","kibana_dashboard":"","docs":"","xpack":{"type":"json"},"window":"300s"},"trigger":{"schedule":{"interval":"30s"}},"input":{"search":{"request":{"search_type":"query_then_fetch","indices":["metricbeat-*"],"rest_total_hits_as_int":true,"body":{"aggs":{"result":{"top_hits":{"size":1}},"pods":{"cardinality":{"field":"kubernetes.pod.name"}},"not_ready":{"terms":{"field":"kubernetes.pod.name","min_doc_count":12,"size":100}}},"query":{"bool":{"must_not":[{"match":{"kubernetes.pod.status.ready":"true"}}],"must":[{"regexp":{"kubernetes.pod.name":"nginx-[^-]+-[^-]+"}},{"match":{"kubernetes.namespace":"test"}},{"match":{"metricset.name":"state_pod"}},{"match":{"kubernetes.pod.status.phase":"running"}}],"filter":[{"range":{"@timestamp":{"gte":"now-{{ctx.metadata.window}}"}}}]}}}}}},"condition":{"compare":{"ctx.payload.aggregations.not_ready.buckets":{"not_eq":[]}}},"actions":{"email_admin":{"throttle_period_in_millis":3600000,"email":{"profile":"standard","subject":"{{#ctx.payload.aggregations.result.hits.hits.0._source}}{{ctx.metadata.name}}
      has {{ctx.payload.aggregations.pods.value}} not ready pod(s){{/ctx.payload.aggregations.result.hits.hits.0._source}}","body":{"html":"{{#ctx.payload.aggregations.result.hits.hits.0._source}}<a
      href=\"{{ctx.metadata.kibana_url}}/app/kibana#/discover?_a=(columns:!(_source),filters:!((''$state'':(store:appState),meta:(alias:!n,disabled:!f,index:''metricbeat-*'',key:query,negate:!f,type:custom,value:''''),query:(bool:(must:!((regexp:(kubernetes.pod.name:''{{ctx.metadata.regex}}'')),(match:(metricset.name:''state_pod'')),(match:(kubernetes.namespace:{{ctx.metadata.namespace}}))))))),index:''metricbeat-*'',interval:auto,query:(language:lucene,query:''''),regexp:(language:lucene,query:''kubernetes.pod.name:test-nginx-%5B%5E-%5D%20-%5B%5E-%5D%20''),sort:!(''@timestamp'',desc),time:(from:now%2FM,mode:quick,to:now%2FM))&_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-15m,mode:quick,to:now))\">{{ctx.metadata.name}}</a>
      has {{ctx.payload.aggregations.pods.value}} not ready pod(s) <a href=\"{{ctx.metadata.kibana_url}}/app/kibana#/management/elasticsearch/watcher/watches/watch/{{ctx.metadata.name}}/status\">[ack]</a>{{#ctx.metadata.docs}}
      <a href=\"{{.}}\">[docs]</a>{{/ctx.metadata.docs}}{{/ctx.payload.aggregations.result.hits.hits.0._source}}"},"to":["michael.russell@elastic.co"]}},"notify-slack":{"throttle_period_in_millis":3600000,"slack":{"message":{"text":"{{#ctx.payload.aggregations.result.hits.hits.0._source}}*<{{ctx.metadata.kibana_url}}/app/kibana#/discover?_a=(columns:!(_source),filters:!((''$state'':(store:appState),meta:(alias:!n,disabled:!f,index:''metricbeat-*'',key:query,negate:!f,type:custom,value:''''),query:(bool:(must:!((regexp:(kubernetes.pod.name:''{{ctx.metadata.regex}}'')),(match:(metricset.name:''state_pod'')),(match:(kubernetes.namespace:{{ctx.metadata.namespace}}))))))),index:''metricbeat-*'',interval:auto,query:(language:lucene,query:''''),regexp:(language:lucene,query:''kubernetes.pod.name:test-nginx-%5B%5E-%5D%20-%5B%5E-%5D%20''),sort:!(''@timestamp'',desc),time:(from:now%2FM,mode:quick,to:now%2FM))&_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-15m,mode:quick,to:now))|{{ctx.metadata.name}}>*
      has `{{ctx.payload.aggregations.pods.value}}` not ready pod(s) <{{ctx.metadata.kibana_url}}/app/kibana#/management/elasticsearch/watcher/watches/watch/{{ctx.metadata.name}}/status|[ack]>{{#ctx.metadata.docs}}
      <{{.}}|[docs]>{{/ctx.metadata.docs}}{{/ctx.payload.aggregations.result.hits.hits.0._source}}","to":["@michael.russell"]}}}}}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json
    method: PUT
    uri: http://elasticsearch:9200/_xpack/watcher/watch/test.nginx
  response:
    body:
      string: '{"_id":"test.nginx","_version":1,"_seq_no":1,"_primary_term":1,"created":true}'
    headers:
      Warning:
      - 299 Elasticsearch-7.1.1-7a013de "[PUT /_xpack/watcher/watch/{id}] is deprecated!
        Use [PUT /_watcher/watch/{id}] instead."
      content-length:
      - '78'
      content-type:
      - application/json; charset=UTF-8
    status:
      code: 201
      message: Created
- request:
    body: '{"metadata":{"name":"test.hello","namespace":"test","regex":"hello-%5B%5E-%5D%2B-%5B%5E-%5D%2B","kibana_url":"https://kibana.example.com","kibana_dashboard":"","docs":"","xpack":{"type":"json"},"window":"300s"},"trigger":{"schedule":{"interval":"30s"}},"input":{"search":{"request":{"search_type":"query_then_fetch","indices":["metricbeat-*"],"rest_total_hits_as_int":true,"body":{"aggs":{"result":{"top_hits":{"size":1}},"pods":{"cardinality":{"field":"kubernetes.pod.name"}},"not_ready":{"terms":{"field":"kubernetes.pod.name","min_doc_count":12,"size":100}}},"query":{"bool":{"must_not":[{"match":{"kubernetes.pod.status.phase":"running"}},{"match":{"kubernetes.pod.status.phase":"pending"}}],"must":[{"regexp":{"kubernetes.pod.name":"hello-[^-]+-[^-]+"}},{"match":{"kubernetes.namespace":"test"}},{"match":{"metricset.name":"state_pod"}}],"filter":[{"range":{"@timestamp":{"gte":"now-{{ctx.metadata.window}}"}}}]}},"size":2,"sort":[{"kubernetes.pod.name":{"order":"desc","mode":"max"}}]}}}},"condition":{"script":{"lang":"painless","source":"for
      (h in ctx.payload.hits.hits) { if (h._source.kubernetes.pod.status.phase ==
      ''succeeded'') return false; } return true;"}},"actions":{"email_admin":{"throttle_period_in_millis":3600000,"email":{"profile":"standard","subject":"{{#ctx.payload.aggregations.result.hits.hits.0._source}}{{ctx.metadata.name}}
      has {{ctx.payload.aggregations.pods.value}} not ready pod(s){{/ctx.payload.aggregations.result.hits.hits.0._source}}","body":{"html":"{{#ctx.payload.aggregations.result.hits.hits.0._source}}<a
      href=\"{{ctx.metadata.kibana_url}}/app/kibana#/discover?_a=(columns:!(_source),filters:!((''$state'':(store:appState),meta:(alias:!n,disabled:!f,index:''metricbeat-*'',key:query,negate:!f,type:custom,value:''''),query:(bool:(must:!((regexp:(kubernetes.pod.name:''{{ctx.metadata.regex}}'')),(match:(metricset.name:''state_pod'')),(match:(kubernetes.namespace:{{ctx.metadata.namespace}}))))))),index:''metricbeat-*'',interval:auto,query:(language:lucene,query:''''),regexp:(language:lucene,query:''kubernetes.pod.name:test-nginx-%5B%5E-%5D%20-%5B%5E-%5D%20''),sort:!(''@timestamp'',desc),time:(from:now%2FM,mode:quick,to:now%2FM))&_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-15m,mode:quick,to:now))\">{{ctx.metadata.name}}</a>
      has {{ctx.payload.aggregations.pods.value}} not ready pod(s) <a href=\"{{ctx.metadata.kibana_url}}/app/kibana#/management/elasticsearch/watcher/watches/watch/{{ctx.metadata.name}}/status\">[ack]</a>{{#ctx.metadata.docs}}
      <a href=\"{{.}}\">[docs]</a>{{/ctx.metadata.docs}}{{/ctx.payload.aggregations.result.hits.hits.0._source}}"},"to":["michael.russell@elastic.co"]}},"notify-slack":{"throttle_period_in_millis":3600000,"slack":{"message":{"text":"{{#ctx.payload.aggregations.result.hits.hits.0._source}}*<{{ctx.metadata.kibana_url}}/app/kibana#/discover?_a=(columns:!(_source),filters:!((''$state'':(store:appState),meta:(alias:!n,disabled:!f,index:''metricbeat-*'',key:query,negate:!f,type:custom,value:''''),query:(bool:(must:!((regexp:(kubernetes.pod.name:''{{ctx.metadata.regex}}'')),(match:(metricset.name:''state_pod'')),(match:(kubernetes.namespace:{{ctx.metadata.namespace}}))))))),index:''metricbeat-*'',interval:auto,query:(language:lucene,query:''''),regexp:(language:lucene,query:''kubernetes.pod.name:test-nginx-%5B%5E-%5D%20-%5B%5E-%5D%20''),sort:!(''@timestamp'',desc),time:(from:now%2FM,mode:quick,to:now%2FM))&_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-15m,mode:quick,to:now))|{{ctx.metadata.name}}>*
      has `{{ctx.payload.aggregations.pods.value}}` not ready pod(s) <{{ctx.metadata.kibana_url}}/app/kibana#/management/elasticsearch/watcher/watches/watch/{{ctx.metadata.name}}/status|[ack]>{{#ctx.metadata.docs}}
      <{{.}}|[docs]>{{/ctx.metadata.docs}}{{/ctx.payload.aggregations.result.hits.hits.0._source}}","to":["@michael.russell"]}}}}}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json
    method: PUT
    uri: http://elasticsearch:9200/_xpack/watcher/watch/test.hello
  response:
    body:
      string: '{"_id":"test.hello","_version":1,"_seq_no":2,"_primary_term":1,"created":true}'
    headers:
      Warning:
      - 299 Elasticsearch-7.1.1-7a013de "[PUT /_xpack/watcher/watch/{id}] is deprecated!
        Use [PUT /_watcher/watch/{id}] instead."
      content-length:
      - '78'
      content-type:
      - application/json; charset=UTF-8
    status:
      code: 201
      message: Created
- request:
    body: '{"metadata":{"window":"300s","subject":"No metricbeat data has been recieved
      in the last 5 minutes!","message":"No metricbeat data has been recieved in the
      last 5 minutes! <https://kibana.example.com|kibana>"},"trigger":{"schedule":{"interval":"60s"}},"input":{"search":{"request":{"search_type":"query_then_fetch","indices":["metricbeat-*"],"rest_total_hits_as_int":true,"body":{"query":{"bool":{"must":[{"match":{"metricset.name":"state_pod"}}],"filter":[{"range":{"@timestamp":{"gte":"now-{{ctx.metadata.window}}"}}}]}}}}}},"condition":{"compare":{"ctx.payload.hits.total":{"eq":0}}},"actions":{"email_admin":{"throttle_period_in_millis":3600000,"email":{"profile":"standard","subject":"{{ctx.metadata.subject}}","body":{"text":"{{ctx.metadata.message}}"},"to":["michael.russell@elastic.co"]}},"notify-slack":{"throttle_period_in_millis":3600000,"slack":{"message":{"text":"{{ctx.metadata.message}}","to":["@michael.russell"]}}}}}'
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json
    method: PUT
    uri: http://elasticsearch:9200/_xpack/watcher/watch/metricbeat
  response:
    body:
      string: '{"_id":"metricbeat","_version":1,"_seq_no":3,"_primary_term":1,"created":true}'
    headers:
      Warning:
      - 299 Elasticsearch-7.1.1-7a013de "[PUT /_xpack/watcher/watch/{id}] is deprecated!
        Use [PUT /_watcher/watch/{id}] instead."
      content-length:
      - '78'
      content-type:
      - application/json; charset=UTF-8
    status:
      code: 201
      message: Created
- request:
    body: null
    headers:
      connection:
      - keep-alive
      content-type:
      - application/json
    method: GET
    uri: http://elasticsearch:9200/.watches/_search?size=1000
  response:
    body:
      string: '{"took":6,"timed_out":false,"_shards":{"total":1,"successful":1,"skipped":0,"failed":0},"hits":{"total":{"value":4,"relation":"eq"},"max_score":1.0,"hits":[{"_index":".watches","_type":"_doc","_id":"disabled.nginx","_score":1.0,"_source":{"trigger":{"schedule":{"interval":"30s"}},"input":{"search":{"request":{"search_type":"query_then_fetch","indices":["metricbeat-*"],"rest_total_hits_as_int":true,"body":{"aggs":{"result":{"top_hits":{"size":1}},"pods":{"cardinality":{"field":"kubernetes.pod.name"}},"not_ready":{"terms":{"field":"kubernetes.pod.name","min_doc_count":12,"size":100}}},"query":{"bool":{"must_not":[{"match":{"kubernetes.pod.status.ready":"true"}}],"must":[{"regexp":{"kubernetes.pod.name":"nginx-[^-]+-[^-]+"}},{"match":{"kubernetes.namespace":"disabled"}},{"match":{"metricset.name":"state_pod"}},{"match":{"kubernetes.pod.status.phase":"running"}}],"filter":[{"range":{"@timestamp":{"gte":"now-{{ctx.metadata.window}}"}}}]}}}}}},"condition":{"compare":{"ctx.payload.aggregations.not_ready.buckets":{"not_eq":[]}}},"actions":{},"metadata":{"regex":"nginx-%5B%5E-%5D%2B-%5B%5E-%5D%2B","docs":"","name":"disabled.nginx","namespace":"disabled","window":"300s","kibana_url":"https://kibana.example.com","kibana_dashboard":"","xpack":{"type":"json"}},"status":{"state":{"active":true,"timestamp":"2019-11-01T08:12:49.921Z"},"actions":{},"headers":{"_xpack_security_authentication":"l++rAwAHZWxhc3RpYwEJc3VwZXJ1c2VyCgEJX3Jlc2VydmVkBQEAAAEADGY2OTBlZDc2MDhhOAhyZXNlcnZlZAhyZXNlcnZlZAAACgA="},"version":-1}}},{"_index":".watches","_type":"_doc","_id":"test.nginx","_score":1.0,"_source":{"trigger":{"schedule":{"interval":"30s"}},"input":{"search":{"request":{"search_type":"query_then_fetch","indices":["metricbeat-*"],"rest_total_hits_as_int":true,"body":{"aggs":{"result":{"top_hits":{"size":1}},"pods":{"cardinality":{"field":"kubernetes.pod.name"}},"not_ready":{"terms":{"field":"kubernetes.pod.name","min_doc_count":12,"size":100}}},"query":{"bool":{"must_not":[{"match":{"kubernetes.pod.status.ready":"true"}}],"must":[{"regexp":{"kubernetes.pod.name":"nginx-[^-]+-[^-]+"}},{"match":{"kubernetes.namespace":"test"}},{"match":{"metricset.name":"state_pod"}},{"match":{"kubernetes.pod.status.phase":"running"}}],"filter":[{"range":{"@timestamp":{"gte":"now-{{ctx.metadata.window}}"}}}]}}}}}},"condition":{"compare":{"ctx.payload.aggregations.not_ready.buckets":{"not_eq":[]}}},"actions":{"email_admin":{"throttle_period_in_millis":3600000,"email":{"profile":"standard","to":["michael.russell@elastic.co"],"subject":"{{#ctx.payload.aggregations.result.hits.hits.0._source}}{{ctx.metadata.name}}
        has {{ctx.payload.aggregations.pods.value}} not ready pod(s){{/ctx.payload.aggregations.result.hits.hits.0._source}}","body":{"html":"{{#ctx.payload.aggregations.result.hits.hits.0._source}}<a
        href=\"{{ctx.metadata.kibana_url}}/app/kibana#/discover?_a=(columns:!(_source),filters:!((''$state'':(store:appState),meta:(alias:!n,disabled:!f,index:''metricbeat-*'',key:query,negate:!f,type:custom,value:''''),query:(bool:(must:!((regexp:(kubernetes.pod.name:''{{ctx.metadata.regex}}'')),(match:(metricset.name:''state_pod'')),(match:(kubernetes.namespace:{{ctx.metadata.namespace}}))))))),index:''metricbeat-*'',interval:auto,query:(language:lucene,query:''''),regexp:(language:lucene,query:''kubernetes.pod.name:test-nginx-%5B%5E-%5D%20-%5B%5E-%5D%20''),sort:!(''@timestamp'',desc),time:(from:now%2FM,mode:quick,to:now%2FM))&_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-15m,mode:quick,to:now))\">{{ctx.metadata.name}}</a>
        has {{ctx.payload.aggregations.pods.value}} not ready pod(s) <a href=\"{{ctx.metadata.kibana_url}}/app/kibana#/management/elasticsearch/watcher/watches/watch/{{ctx.metadata.name}}/status\">[ack]</a>{{#ctx.metadata.docs}}
        <a href=\"{{.}}\">[docs]</a>{{/ctx.metadata.docs}}{{/ctx.payload.aggregations.result.hits.hits.0._source}}"}}},"notify-slack":{"throttle_period_in_millis":3600000,"slack":{"message":{"to":["@michael.russell"],"text":"{{#ctx.payload.aggregations.result.hits.hits.0._source}}*<{{ctx.metadata.kibana_url}}/app/kibana#/discover?_a=(columns:!(_source),filters:!((''$state'':(store:appState),meta:(alias:!n,disabled:!f,index:''metricbeat-*'',key:query,negate:!f,type:custom,value:''''),query:(bool:(must:!((regexp:(kubernetes.pod.name:''{{ctx.metadata.regex}}'')),(match:(metricset.name:''state_pod'')),(match:(kubernetes.namespace:{{ctx.metadata.namespace}}))))))),index:''metricbeat-*'',interval:auto,query:(language:lucene,query:''''),regexp:(language:lucene,query:''kubernetes.pod.name:test-nginx-%5B%5E-%5D%20-%5B%5E-%5D%20''),sort:!(''@timestamp'',desc),time:(from:now%2FM,mode:quick,to:now%2FM))&_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-15m,mode:quick,to:now))|{{ctx.metadata.name}}>*
        has `{{ctx.payload.aggregations.pods.value}}` not ready pod(s) <{{ctx.metadata.kibana_url}}/app/kibana#/management/elasticsearch/watcher/watches/watch/{{ctx.metadata.name}}/status|[ack]>{{#ctx.metadata.docs}}
        <{{.}}|[docs]>{{/ctx.metadata.docs}}{{/ctx.payload.aggregations.result.hits.hits.0._source}}"}}}},"metadata":{"regex":"nginx-%5B%5E-%5D%2B-%5B%5E-%5D%2B","docs":"","name":"test.nginx","namespace":"test","window":"300s","kibana_url":"https://kibana.example.com","kibana_dashboard":"","xpack":{"type":"json"}},"status":{"state":{"active":true,"timestamp":"2019-11-01T08:12:50.176Z"},"actions":{"email_admin":{"ack":{"timestamp":"2019-11-01T08:12:50.176Z","state":"awaits_successful_execution"}},"notify-slack":{"ack":{"timestamp":"2019-11-01T08:12:50.176Z","state":"awaits_successful_execution"}}},"headers":{"_xpack_security_authentication":"l++rAwAHZWxhc3RpYwEJc3VwZXJ1c2VyCgEJX3Jlc2VydmVkBQEAAAEADGY2OTBlZDc2MDhhOAhyZXNlcnZlZAhyZXNlcnZlZAAACgA="},"version":-1}}},{"_index":".watches","_type":"_doc","_id":"test.hello","_score":1.0,"_source":{"trigger":{"schedule":{"interval":"30s"}},"input":{"search":{"request":{"search_type":"query_then_fetch","indices":["metricbeat-*"],"rest_total_hits_as_int":true,"body":{"aggs":{"result":{"top_hits":{"size":1}},"pods":{"cardinality":{"field":"kubernetes.pod.name"}},"not_ready":{"terms":{"field":"kubernetes.pod.name","min_doc_count":12,"size":100}}},"query":{"bool":{"must_not":[{"match":{"kubernetes.pod.status.phase":"running"}},{"match":{"kubernetes.pod.status.phase":"pending"}}],"must":[{"regexp":{"kubernetes.pod.name":"hello-[^-]+-[^-]+"}},{"match":{"kubernetes.namespace":"test"}},{"match":{"metricset.name":"state_pod"}}],"filter":[{"range":{"@timestamp":{"gte":"now-{{ctx.metadata.window}}"}}}]}},"size":2,"sort":[{"kubernetes.pod.name":{"order":"desc","mode":"max"}}]}}}},"condition":{"script":{"source":"for
        (h in ctx.payload.hits.hits) { if (h._source.kubernetes.pod.status.phase ==
        ''succeeded'') return false; } return true;","lang":"painless"}},"actions":{"email_admin":{"throttle_period_in_millis":3600000,"email":{"profile":"standard","to":["michael.russell@elastic.co"],"subject":"{{#ctx.payload.aggregations.result.hits.hits.0._source}}{{ctx.metadata.name}}
        has {{ctx.payload.aggregations.pods.value}} not ready pod(s){{/ctx.payload.aggregations.result.hits.hits.0._source}}","body":{"html":"{{#ctx.payload.aggregations.result.hits.hits.0._source}}<a
        href=\"{{ctx.metadata.kibana_url}}/app/kibana#/discover?_a=(columns:!(_source),filters:!((''$state'':(store:appState),meta:(alias:!n,disabled:!f,index:''metricbeat-*'',key:query,negate:!f,type:custom,value:''''),query:(bool:(must:!((regexp:(kubernetes.pod.name:''{{ctx.metadata.regex}}'')),(match:(metricset.name:''state_pod'')),(match:(kubernetes.namespace:{{ctx.metadata.namespace}}))))))),index:''metricbeat-*'',interval:auto,query:(language:lucene,query:''''),regexp:(language:lucene,query:''kubernetes.pod.name:test-nginx-%5B%5E-%5D%20-%5B%5E-%5D%20''),sort:!(''@timestamp'',desc),time:(from:now%2FM,mode:quick,to:now%2FM))&_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-15m,mode:quick,to:now))\">{{ctx.metadata.name}}</a>
        has {{ctx.payload.aggregations.pods.value}} not ready pod(s) <a href=\"{{ctx.metadata.kibana_url}}/app/kibana#/management/elasticsearch/watcher/watches/watch/{{ctx.metadata.name}}/status\">[ack]</a>{{#ctx.metadata.docs}}
        <a href=\"{{.}}\">[docs]</a>{{/ctx.metadata.docs}}{{/ctx.payload.aggregations.result.hits.hits.0._source}}"}}},"notify-slack":{"throttle_period_in_millis":3600000,"slack":{"message":{"to":["@michael.russell"],"text":"{{#ctx.payload.aggregations.result.hits.hits.0._source}}*<{{ctx.metadata.kibana_url}}/app/kibana#/discover?_a=(columns:!(_source),filters:!((''$state'':(store:appState),meta:(alias:!n,disabled:!f,index:''metricbeat-*'',key:query,negate:!f,type:custom,value:''''),query:(bool:(must:!((regexp:(kubernetes.pod.name:''{{ctx.metadata.regex}}'')),(match:(metricset.name:''state_pod'')),(match:(kubernetes.namespace:{{ctx.metadata.namespace}}))))))),index:''metricbeat-*'',interval:auto,query:(language:lucene,query:''''),regexp:(language:lucene,query:''kubernetes.pod.name:test-nginx-%5B%5E-%5D%20-%5B%5E-%5D%20''),sort:!(''@timestamp'',desc),time:(from:now%2FM,mode:quick,to:now%2FM))&_g=(refreshInterval:(display:Off,pause:!f,value:0),time:(from:now-15m,mode:quick,to:now))|{{ctx.metadata.name}}>*
        has `{{ctx.payload.aggregations.pods.value}}` not ready pod(s) <{{ctx.metadata.kibana_url}}/app/kibana#/management/elasticsearch/watcher/watches/watch/{{ctx.metadata.name}}/status|[ack]>{{#ctx.metadata.docs}}
        <{{.}}|[docs]>{{/ctx.metadata.docs}}{{/ctx.payload.aggregations.result.hits.hits.0._source}}"}}}},"metadata":{"regex":"hello-%5B%5E-%5D%2B-%5B%5E-%5D%2B","docs":"","name":"test.hello","namespace":"test","window":"300s","kibana_url":"https://kibana.example.com","kibana_dashboard":"","xpack":{"type":"json"}},"status":{"state":{"active":true,"timestamp":"2019-11-01T08:12:50.312Z"},"actions":{"email_admin":{"ack":{"timestamp":"2019-11-01T08:12:50.312Z","state":"awaits_successful_execution"}},"notify-slack":{"ack":{"timestamp":"2019-11-01T08:12:50.312Z","state":"awaits_successful_execution"}}},"headers":{"_xpack_security_authentication":"l++rAwAHZWxhc3RpYwEJc3VwZXJ1c2VyCgEJX3Jlc2VydmVkBQEAAAEADGY2OTBlZDc2MDhhOAhyZXNlcnZlZAhyZXNlcnZlZAAACgA="},"version":-1}}},{"_index":".watches","_type":"_doc","_id":"metricbeat","_score":1.0,"_source":{"trigger":{"schedule":{"interval":"60s"}},"input":{"search":{"request":{"search_type":"query_then_fetch","indices":["metricbeat-*"],"rest_total_hits_as_int":true,"body":{"query":{"bool":{"must":[{"match":{"metricset.name":"state_pod"}}],"filter":[{"range":{"@timestamp":{"gte":"now-{{ctx.metadata.window}}"}}}]}}}}}},"condition":{"compare":{"ctx.payload.hits.total":{"eq":0}}},"actions":{"email_admin":{"throttle_period_in_millis":3600000,"email":{"profile":"standard","to":["michael.russell@elastic.co"],"subject":"{{ctx.metadata.subject}}","body":{"text":"{{ctx.metadata.message}}"}}},"notify-slack":{"throttle_period_in_millis":3600000,"slack":{"message":{"to":["@michael.russell"],"text":"{{ctx.metadata.message}}"}}}},"metadata":{"subject":"No
        metricbeat data has been recieved in the last 5 minutes!","window":"300s","message":"No
        metricbeat data has been recieved in the last 5 minutes! <https://kibana.example.com|kibana>"},"status":{"state":{"active":true,"timestamp":"2019-11-01T08:12:50.467Z"},"actions":{"email_admin":{"ack":{"timestamp":"2019-11-01T08:12:50.467Z","state":"awaits_successful_execution"}},"notify-slack":{"ack":{"timestamp":"2019-11-01T08:12:50.467Z","state":"awaits_successful_execution"}}},"headers":{"_xpack_security_authentication":"l++rAwAHZWxhc3RpYwEJc3VwZXJ1c2VyCgEJX3Jlc2VydmVkBQEAAAEADGY2OTBlZDc2MDhhOAhyZXNlcnZlZAhyZXNlcnZlZAAACgA="},"version":-1}}}]}}'
    headers:
      content-length:
      - '11555'
      content-type:
      - application/json; charset=UTF-8
    status:
      code: 200
      message: OK
version: 1
